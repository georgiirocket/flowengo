<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon-svg.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script>
      (() => {
        const classList = document.documentElement.classList;
        const style = document.documentElement.style;
        const dark = window.matchMedia("(prefers-color-scheme: dark)");

        const update = () => {
          const theme = localStorage.getItem('theme')
          const isSavedTheme = theme === 'dark' || theme === 'light'

          console.log({theme, dark: dark.matches, isSavedTheme})

          if(isSavedTheme && theme === 'dark') {
            classList.remove("light");
            classList.add("dark");
            style.colorScheme = "dark"

            return;
          }

          if(isSavedTheme && theme === 'light') {
            classList.add("light");
            style.colorScheme = "light"

            return;
          }

          if(dark.matches) {
            classList.add("dark");
            style.colorScheme = "dark"

            return;
          }


          classList.add("light");
          style.colorScheme = "light"
        };
        update();
      })();
    </script>
    <title>Flowengo</title>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
